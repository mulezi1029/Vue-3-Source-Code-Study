{
  "version": 3,
  "sources": ["../src/nodeOps.ts", "../src/module/attr.ts", "../src/module/class.ts", "../src/module/events.ts", "../src/module/style.ts", "../src/patchProp.ts", "../../shared/src/index.ts", "../../runtime-core/src/vnode.ts", "../../runtime-core/src/h.ts", "../src/index.ts"],
  "sourcesContent": ["// DOM \u8282\u70B9\u64CD\u4F5C\u7684 API\r\n/**\r\n * \u5C06childEle\u8282\u70B9\u63D2\u5165\u5230parent\u4E2D\u7684anchor\u63CF\u70B9\u4E4B\u524D\r\n * @param {Node} child\r\n * @param {Element} parent\r\n * @param {Node|undefined|null} anchor\r\n */\r\nconst insert = (child: Node, parent: Element, anchor: Node | undefined | null) => {\r\n\tparent.insertBefore(child, anchor || null) // anchor \u4E3A null \u65F6\u76F8\u5F53\u4E8E parent.appendChild(child)\r\n}\r\n\r\n/**\r\n * \u79FB\u9664child\u8282\u70B9\r\n * @param child\r\n */\r\nconst remove = (child: Node) => {\r\n\tconst parent = child.parentNode\r\n\tif (parent) {\r\n\t\tparent.removeChild(child)\r\n\t}\r\n}\r\n/**\r\n * \u6839\u636E\u4F20\u5165\u7684selector\u67E5\u627E\u5143\u7D20\u8282\u70B9\r\n * @param selector\r\n * @returns\r\n */\r\nconst querySelector = (selector) => {\r\n\treturn document.querySelector(selector)\r\n}\r\n\r\n/**\r\n * \u6839\u636E\u4F20\u5165\u7684node\u8282\u70B9\u67E5\u627E\u7236\u8282\u70B9\r\n * @param node\r\n * @returns\r\n */\r\nconst parentNode = (node) => {\r\n\treturn node.parentNode\r\n}\r\n\r\n/**\r\n * \u6839\u636E\u4F20\u5165\u7684node\u8282\u70B9\u67E5\u627E\u4E0B\u4E00\u4E2A\u5144\u5F1F\u8282\u70B9\r\n * @param node\r\n * @returns\r\n */\r\nconst nextSibling = (node) => {\r\n\treturn node.nextSibling\r\n}\r\n\r\n/**\r\n * \u521B\u5EFA\u6307\u5B9AtagName\u7684\u5143\u7D20\u8282\u70B9\r\n * @param tagName\r\n * @returns\r\n */\r\nconst createElement = (tagName) => {\r\n\treturn document.createElement(tagName)\r\n}\r\n\r\n/**\r\n * \u6839\u636Etext\u503C\u521B\u5EFA\u6587\u672C\u8282\u70B9\r\n * @param text\r\n */\r\nconst createText = (text) => {\r\n\tdocument.createTextNode(text)\r\n}\r\n\r\n/**\r\n * \u5C06el\u8282\u70B9\u7684\u8282\u70B9\u503C\u8BBE\u4E3Atext\u503C\r\n * @param el\r\n * @param text\r\n */\r\nconst setText = (el, text) => {\r\n\tel.nodeValue = text\r\n}\r\n/**\r\n * \u5C06el\u5143\u7D20\u8282\u70B9\u7684\u5185\u5BB9\u8BBE\u4E3Atext\u503C\r\n * @param el\r\n * @param text\r\n */\r\n\r\nconst setElementText = (el, text) => {\r\n\tel.textContent = text\r\n}\r\nexport const nodeOps = {\r\n\tinsert,\r\n\tremove,\r\n\tquerySelector,\r\n\tparentNode,\r\n\tnextSibling,\r\n\tcreateElement,\r\n\tcreateText,\r\n\tsetText,\r\n\tsetElementText,\r\n}\r\n", "export const patchAttrs = (el, key, newValue) => {\r\n\tif (newValue) {\r\n\t\tel.setAttribute(key, newValue)\r\n\t} else {\r\n\t\tel.removeAttribute(key)\r\n\t}\r\n}\r\n", "/**\r\n * \u6839\u636E\u4F20\u5165\u7684value\u8BBE\u7F6Eel\u8282\u70B9\u7684 calssName \u5C5E\u6027\r\n * @param el\r\n * @param value\r\n */\r\nexport const patchClass = (el, value) => {\r\n\tif (value == null) {\r\n\t\tel.removeAttribute('class')\r\n\t} else {\r\n\t\tel.className = value\r\n\t}\r\n}\r\n", "/**\r\n * \u521B\u5EFA\u5B9E\u9645\u7ED1\u5B9A\u7ED9\u4E8B\u4EF6\u7684\u5904\u7406\u51FD\u6570\r\n * @param initialValue\r\n * @returns\r\n */\r\nfunction createInvoker(initialValue) {\r\n\tconst invoker = (e) => invoker.value(e)\r\n\tinvoker.value = initialValue\r\n\treturn invoker\r\n}\r\nexport const patchEvents = (el, key, preValue, nextVal) => {\r\n\tconst invokers = el.vei || (el.vei = {}) // \u53D6\u51FA\u8BE5\u5143\u7D20\u7684\u6240\u6709\u4E8B\u4EF6\u56DE\u8C03\u7684\u96C6\u5408\r\n\tconst name = key.slice(2).toLowerCase() //\u83B7\u53D6\u4E8B\u4EF6\u540D\u79F0\r\n\tlet existingInvoker = invokers[name] // \u5C1D\u8BD5\u4ECE\u7F13\u5B58\u4E2D\u53D6\u51FA\u5F53\u524D\u4E8B\u4EF6\u540D\u79F0\u5BF9\u5E94\u7684invoker\r\n\r\n\t// \u5982\u679C\u8BE5\u4E8B\u4EF6\u540D\u79F0\u4E0B\u5DF2\u7ECF\u5B58\u5728\u56DE\u8C03\uFF0C\u5E76\u4E14\u6709nextvalue\uFF0C\u8868\u660E\u662F\u66F4\u65B0\u4E8B\u4EF6\r\n\tif (existingInvoker && nextVal) {\r\n\t\texistingInvoker.value = nextVal\r\n\t}\r\n\t// \u8BE5\u4E8B\u4EF6\u540D\u79F0\u4E0B\u6CA1\u6709\u56DE\u8C03\uFF0C\u5E76\u4E14\u6709nextValue\uFF0C\u8868\u660E\u662F\u65B0\u589E\u4E8B\u4EF6\r\n\telse if (!existingInvoker && nextVal) {\r\n\t\tconst invoker = createInvoker(nextVal) // \u521B\u5EFA\u8981\u6CE8\u518C\u7ED9\u4E8B\u4EF6\u5904\u7406\u7684\u56DE\u8C03\u51FD\u6570\r\n\t\tinvokers[name] = invoker // \u5C06\u5176\u7F13\u5B58\u5728\u8BE5\u5143\u7D20\u7684\u4E8B\u4EF6\u56DE\u8C03\u96C6\u5408\u4E2D\r\n\t\tel.addEventListener(name, invoker) // \u6CE8\u518C\u4E8B\u4EF6\r\n\t}\r\n\t// \u6CA1\u6709nextValue\uFF0C\u8868\u660E\u79FB\u9664\u4E8B\u4EF6\r\n\telse if (!nextVal) {\r\n\t\tel.removeEventLister(name, existingInvoker) // \u79FB\u9664\u4E8B\u4EF6\r\n\t\tinvokers[name] = null // \u7F13\u5B58\u4E2D\u5220\u9664\r\n\t}\r\n}\r\n\r\n// @click = fn1   @click = fn2\r\n// invoker = (e) => invoker.fn(e)\r\n// addEventListener(click,invoker)\r\n// invoker.fn = fn1     -->     invoker.fn = fn2\r\n", "/**\r\n * \u6839\u636EperValue\u4E0EnextValue\uFF0C\u8BBE\u7F6Eel\u8282\u70B9\u7684style\u5C5E\u6027\r\n * @param el\r\n * @param preValue\r\n * @param nextValue\r\n */\r\nexport const patchStyle = (el, preValue, nextValue) => {\r\n\tconst style = (el as HTMLElement).style\r\n\r\n\t// \u5148\u5C06\u65B0\u7684\u5BF9\u8C61\u4E2D\u7684\u5C5E\u6027\u8BBE\u7F6E\u5230style\u4E0A\r\n\tfor (const key in nextValue) {\r\n\t\tstyle[key] = nextValue[key]\r\n\t}\r\n\t// \u539F\u6765\u6709\u7684\u5C5E\u6027\u5728\u65B0\u503C\u4E2D\u6CA1\u6709\u7684\u8BDD\u8981\u5220\u9664\r\n\tfor (const key in preValue) {\r\n\t\tif (!nextValue[key]) {\r\n\t\t\tstyle[key] = ''\r\n\t\t}\r\n\t}\r\n}\r\n", "// \u8BBE\u7F6E\u5C5E\u6027\u64CD\u4F5CAPI\r\nimport { patchAttrs } from './module/attr'\r\nimport { patchClass } from './module/class'\r\nimport { patchEvents } from './module/events'\r\nimport { patchStyle } from './module/style'\r\n\r\n/**\r\n *\r\n * @param {Element} el \u8282\u70B9\u5143\u7D20\r\n * @param key \u5C5E\u6027\u540D\r\n * @param preVal \u4E4B\u524D\u7684\u503C\r\n * @param nextVal \u65B0\u503C\r\n */\r\nexport const patchProp = (el: Element, key, preVal, nextVal) => {\r\n\tif (key === 'class') {\r\n\t\t// class\r\n\t\tpatchClass(el, nextVal)\r\n\t} else if (key === 'style') {\r\n\t\t// style\r\n\t\tpatchStyle(el, preVal, nextVal)\r\n\t} else if (/^on[^a-z]/.test(key)) {\r\n\t\t// event\r\n\t\tpatchEvents(el, key, preVal, nextVal)\r\n\t} else {\r\n\t\t// attr\r\n\t\tpatchAttrs(el, key, nextVal)\r\n\t}\r\n}\r\n", "export function isObject(obj: any): boolean {\r\n\treturn obj !== null && typeof obj === 'object'\r\n}\r\n\r\nexport function isFunction(value: any): boolean {\r\n\treturn typeof value === 'function'\r\n}\r\n\r\nexport function isString(value: any): boolean {\r\n\treturn typeof value === 'string'\r\n}\r\n", "import { isString } from '@vue/shared'\r\nimport { shapeFlags } from 'packages/shared/src/shapeFlags'\r\n\r\nexport function isVNode(vnode) {\r\n\treturn vnode.__v_isVnode === true\r\n}\r\n\r\n/**\r\n * \u6700\u5E95\u5C42\u7528\u4E8E\u521B\u5EFA\u6700\u57FA\u672C\u7684\u865A\u62DF\u8282\u70B9\u7684API\r\n * @param type\r\n * @param props\r\n * @param children\r\n * @returns\r\n */\r\nexport function createVNode(type: any, props?: any, children?: any) {\r\n\t// shapeFlag \u6807\u8BC6\u7528\u6765\u533A\u5206\u5BF9\u5E94\u865A\u62DF\u8282\u70B9(\u5305\u62EC\u5B50\u7EA7)\u7684\u7C7B\u578B\r\n\tconst shapeFlag = isString(type) ? shapeFlags.ELEMENT : 0\r\n\r\n\t// \u521B\u5EFA\u865A\u62DF\u8282\u70B9\uFF1A\u76EE\u524D\u53EA\u5177\u5907\u6700\u57FA\u672C\u7684\u7ED3\u6784\r\n\tconst vnode = {\r\n\t\t__v_isVnode: true,\r\n\t\ttype,\r\n\t\tprops,\r\n\t\tchildren,\r\n\t\tshapeFlag,\r\n\t\tkey: props?.key,\r\n\t\tel: null,\r\n\t}\r\n\r\n\tif (children) {\r\n\t\t// children \u8981\u4E48\u662F\u6570\u7EC4\u8981\u4E48\u662F\u6587\u672C\r\n\t\tconst type = isString(children) ? shapeFlags.TEXT_CHILDREN : shapeFlags.ARRAY_CHILDREN\r\n\t\tvnode.shapeFlag |= type\r\n\t}\r\n\r\n\treturn vnode\r\n}\r\n", "import { isObject } from '@vue/shared'\r\nimport { createVNode, isVNode } from './vnode'\r\n\r\n// h \u6839\u636E\u4F20\u5165\u7684\u53C2\u6570\u5B9E\u73B0\u91CD\u8F7D\u6548\u679C\r\nexport function h(type: any, propsOrChildren?: any, children?: any) {\r\n\tconst length = arguments.length\r\n\r\n\t// \u53EA\u6709\u4E00\u4E2A\u53C2\u6570:type only: h('div')\r\n\tif (length === 1) {\r\n\t\treturn createVNode(type)\r\n\t}\r\n\t// \u6709\u4E09\u4E2A\u4EE5\u4E0A\u7684\u53C2\u6570\uFF0C\u7B2C\u4E00\u4E2A\u53C2\u6570\u662Ftype\uFF0C\u7B2C\u4E8C\u4E2A\u53C2\u6570\u5FC5\u987B\u662F props\uFF0C\u5269\u4E0B\u7684\u53C2\u6570\u662Fchildren\r\n\t//  type props children: h('div', { id: 'app' }, 'hello', 'world')\r\n\telse if (length > 3) {\r\n\t\tchildren = Array.from(arguments).slice(2) // \u53D8\u4E3A\u6570\u7EC4\r\n\t\treturn createVNode(type, propsOrChildren, children)\r\n\t}\r\n\t// \u4E24\u4E2A\u53C2\u6570\uFF1A\u53EF\u80FD\u662F type props\uFF0C\u53EF\u80FD\u662Ftype children\r\n\t// h(type, {})  h(type, vnode)  h(type, 'text')  h(type, [])\r\n\telse if (length === 2) {\r\n\t\t// \u7B2C\u4E8C\u4E2A\u53C2\u6570\u662F\u5BF9\u8C61\u4E14\u4E0D\u662F\u6570\u7EC4\u65F6\uFF1A\u6709\u4E24\u79CD\u60C5\u51B5 h(type,props)  h(type,vnode)\r\n\t\tif (isObject(propsOrChildren) && !Array.isArray(propsOrChildren)) {\r\n\t\t\treturn isVNode(propsOrChildren)\r\n\t\t\t\t? createVNode(type, null, [propsOrChildren])\r\n\t\t\t\t: createVNode(type, propsOrChildren)\r\n\t\t} else {\r\n\t\t\t// \u5269\u4E0B\u7684\u4E24\u79CD\uFF1A\u6570\u7EC4\u3001\u6587\u672C\uFF1A type text \uFF0C type []\r\n\t\t\treturn createVNode(type, null, propsOrChildren) // \u6570\u7EC4\u6216\u8005\u6587\u672C\r\n\t\t}\r\n\t}\r\n\t// \u4E09\u4E2A\u53C2\u6570:\u80AF\u5B9A\u6709 type \u548C props\uFF0C\u7B2C\u4E09\u4E2A\u53C2\u6570\u7684children \u53EF\u80FD\u662F vnode\uFF0Ctext\uFF0Carray\uFF0C\u53EA\u8981\u4E0D\u662Farray\uFF0C\u5C31\u53D8\u4E3Aarray\r\n\telse if (length === 3) {\r\n\t\tif (Array.isArray(children)) {\r\n\t\t\treturn createVNode(type, propsOrChildren, children)\r\n\t\t} else {\r\n\t\t\treturn createVNode(type, propsOrChildren, [children])\r\n\t\t}\r\n\t}\r\n}\r\n", "import { nodeOps } from './nodeOps'\r\nimport { patchProp } from './patchProp'\r\n\r\n// \u6D4F\u89C8\u5668\u6E32\u67D3\u9700\u8981\u7684DOM\u64CD\u4F5CAPI\r\nconst renderOptions = Object.assign(nodeOps, { patchProp })\r\n\r\n// console.log('\u6D4F\u89C8\u5668\u6E32\u67D3\u9700\u8981\u7684DOM\u64CD\u4F5CAPI', renderOptions)\r\n\r\nexport * from '@vue/runtime-core'\r\n"],
  "mappings": "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",
  "names": ["type"]
}
