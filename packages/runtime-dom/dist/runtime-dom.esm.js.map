{
  "version": 3,
  "sources": ["../src/nodeOps.ts", "../src/module/attr.ts", "../src/module/class.ts", "../src/module/events.ts", "../src/module/style.ts", "../src/patchProp.ts", "../src/index.ts"],
  "sourcesContent": ["// DOM \u8282\u70B9\u64CD\u4F5C\u7684 API\r\n/**\r\n * \u5C06childEle\u8282\u70B9\u63D2\u5165\u5230parent\u4E2D\u7684anchor\u63CF\u70B9\u4E4B\u524D\r\n * @param {Node} child\r\n * @param {Element} parent\r\n * @param {Node|undefined|null} anchor\r\n */\r\nconst insert = (child: Node, parent: Element, anchor: Node | undefined | null) => {\r\n\tparent.insertBefore(child, anchor || null) // anchor \u4E3A null \u65F6\u76F8\u5F53\u4E8E parent.appendChild(child)\r\n}\r\n\r\n/**\r\n * \u79FB\u9664child\u8282\u70B9\r\n * @param child\r\n */\r\nconst remove = (child: Node) => {\r\n\tconst parent = child.parentNode\r\n\tif (parent) {\r\n\t\tparent.removeChild(child)\r\n\t}\r\n}\r\n/**\r\n * \u6839\u636E\u4F20\u5165\u7684selector\u67E5\u627E\u5143\u7D20\u8282\u70B9\r\n * @param selector\r\n * @returns\r\n */\r\nconst querySelector = (selector) => {\r\n\treturn document.querySelector(selector)\r\n}\r\n\r\n/**\r\n * \u6839\u636E\u4F20\u5165\u7684node\u8282\u70B9\u67E5\u627E\u7236\u8282\u70B9\r\n * @param node\r\n * @returns\r\n */\r\nconst parentNode = (node) => {\r\n\treturn node.parentNode\r\n}\r\n\r\n/**\r\n * \u6839\u636E\u4F20\u5165\u7684node\u8282\u70B9\u67E5\u627E\u4E0B\u4E00\u4E2A\u5144\u5F1F\u8282\u70B9\r\n * @param node\r\n * @returns\r\n */\r\nconst nextSibling = (node) => {\r\n\treturn node.nextSibling\r\n}\r\n\r\n/**\r\n * \u521B\u5EFA\u6307\u5B9AtagName\u7684\u5143\u7D20\u8282\u70B9\r\n * @param tagName\r\n * @returns\r\n */\r\nconst createElement = (tagName) => {\r\n\treturn document.createElement(tagName)\r\n}\r\n\r\n/**\r\n * \u6839\u636Etext\u503C\u521B\u5EFA\u6587\u672C\u8282\u70B9\r\n * @param text\r\n */\r\nconst createText = (text) => {\r\n\tdocument.createTextNode(text)\r\n}\r\n\r\n/**\r\n * \u5C06el\u8282\u70B9\u7684\u8282\u70B9\u503C\u8BBE\u4E3Atext\u503C\r\n * @param el\r\n * @param text\r\n */\r\nconst setText = (el, text) => {\r\n\tel.nodeValue = text\r\n}\r\n/**\r\n * \u5C06el\u5143\u7D20\u8282\u70B9\u7684\u5185\u5BB9\u8BBE\u4E3Atext\u503C\r\n * @param el\r\n * @param text\r\n */\r\nconst setElementText = (el, text) => {\r\n\tel.textContent = text\r\n}\r\n\r\nexport const nodeOps = {\r\n\tinsert,\r\n\tremove,\r\n\tquerySelector,\r\n\tparentNode,\r\n\tnextSibling,\r\n\tcreateElement,\r\n\tcreateText,\r\n\tsetText,\r\n\tsetElementText,\r\n}\r\n", "export const patchAttrs = (el, key, newValue) => {\r\n\tif (newValue) {\r\n\t\tel.setAttribute(key, newValue)\r\n\t} else {\r\n\t\tel.removeAttribute(key)\r\n\t}\r\n}\r\n", "/**\r\n * \u6839\u636E\u4F20\u5165\u7684value\u8BBE\u7F6Eel\u8282\u70B9\u7684 calssName \u5C5E\u6027\r\n * @param el\r\n * @param value\r\n */\r\nexport const patchClass = (el, value) => {\r\n\tif (value == null) {\r\n\t\tel.removeAttribute('class')\r\n\t} else {\r\n\t\tel.className = value\r\n\t}\r\n}\r\n", "/**\r\n * \u521B\u5EFA\u5B9E\u9645\u7ED1\u5B9A\u7ED9\u4E8B\u4EF6\u7684\u5904\u7406\u51FD\u6570\r\n * @param initialValue\r\n * @returns\r\n */\r\nfunction createInvoker(initialValue) {\r\n\tconst invoker = (e) => invoker.value(e)\r\n\tinvoker.value = initialValue\r\n\treturn invoker\r\n}\r\nexport const patchEvents = (el, key, preValue, nextVal) => {\r\n\tconst invokers = el.vei || (el.vei = {}) // \u53D6\u51FA\u8BE5\u5143\u7D20\u7684\u6240\u6709\u4E8B\u4EF6\u56DE\u8C03\u7684\u96C6\u5408\r\n\tconst name = key.slice(2).toLowerCase() //\u83B7\u53D6\u4E8B\u4EF6\u540D\u79F0\r\n\tlet existingInvoker = invokers[name] // \u5C1D\u8BD5\u4ECE\u7F13\u5B58\u4E2D\u53D6\u51FA\u5F53\u524D\u4E8B\u4EF6\u540D\u79F0\u5BF9\u5E94\u7684invoker\r\n\r\n\t// \u5982\u679C\u8BE5\u4E8B\u4EF6\u540D\u79F0\u4E0B\u5DF2\u7ECF\u5B58\u5728\u56DE\u8C03\uFF0C\u5E76\u4E14\u6709nextvalue\uFF0C\u8868\u660E\u662F\u66F4\u65B0\u4E8B\u4EF6\r\n\tif (existingInvoker && nextVal) {\r\n\t\texistingInvoker.value = nextVal\r\n\t}\r\n\t// \u8BE5\u4E8B\u4EF6\u540D\u79F0\u4E0B\u6CA1\u6709\u56DE\u8C03\uFF0C\u5E76\u4E14\u6709nextValue\uFF0C\u8868\u660E\u662F\u65B0\u589E\u4E8B\u4EF6\r\n\telse if (!existingInvoker && nextVal) {\r\n\t\tconst invoker = createInvoker(nextVal) // \u521B\u5EFA\u8981\u6CE8\u518C\u7ED9\u4E8B\u4EF6\u5904\u7406\u7684\u56DE\u8C03\u51FD\u6570\r\n\t\tinvokers[name] = invoker // \u5C06\u5176\u7F13\u5B58\u5728\u8BE5\u5143\u7D20\u7684\u4E8B\u4EF6\u56DE\u8C03\u96C6\u5408\u4E2D\r\n\t\tel.addEventListener(name, invoker) // \u6CE8\u518C\u4E8B\u4EF6\r\n\t}\r\n\t// \u6CA1\u6709nextValue\uFF0C\u8868\u660E\u79FB\u9664\u4E8B\u4EF6\r\n\telse if (!nextVal) {\r\n\t\tel.removeEventLister(name, existingInvoker) // \u79FB\u9664\u4E8B\u4EF6\r\n\t\tinvokers[name] = null // \u7F13\u5B58\u4E2D\u5220\u9664\r\n\t}\r\n}\r\n\r\n// @click = fn1   @click = fn2\r\n// invoker = (e) => invoker.fn(e)\r\n// addEventListener(click,invoker)\r\n// invoker.fn = fn1     -->     invoker.fn = fn2\r\n", "/**\r\n * \u6839\u636EperValue\u4E0EnextValue\uFF0C\u8BBE\u7F6Eel\u8282\u70B9\u7684style\u5C5E\u6027\r\n * @param el\r\n * @param preValue\r\n * @param nextValue\r\n */\r\nexport const patchStyle = (el, preValue, nextValue) => {\r\n\tconst style = (el as HTMLElement).style\r\n\r\n\t// \u5148\u5C06\u65B0\u7684\u5BF9\u8C61\u4E2D\u7684\u5C5E\u6027\u8BBE\u7F6E\u5230style\u4E0A\r\n\tfor (const key in nextValue) {\r\n\t\tstyle[key] = nextValue[key]\r\n\t}\r\n\t// \u539F\u6765\u6709\u7684\u5C5E\u6027\u5728\u65B0\u503C\u4E2D\u6CA1\u6709\u7684\u8BDD\u8981\u5220\u9664\r\n\tfor (const key in preValue) {\r\n\t\tif (!nextValue[key]) {\r\n\t\t\tstyle[key] = ''\r\n\t\t}\r\n\t}\r\n}\r\n", "// \u8BBE\u7F6E\u5C5E\u6027\u64CD\u4F5CAPI\r\nimport { patchAttrs } from './module/attr'\r\nimport { patchClass } from './module/class'\r\nimport { patchEvents } from './module/events'\r\nimport { patchStyle } from './module/style'\r\n\r\n/**\r\n *\r\n * @param {Element} el \u8282\u70B9\u5143\u7D20\r\n * @param key \u5C5E\u6027\u540D\r\n * @param preVal \u4E4B\u524D\u7684\u503C\r\n * @param nextVal \u65B0\u503C\r\n */\r\nexport const patchProp = (el: Element, key, preVal, nextVal) => {\r\n\tif (key === 'class') {\r\n\t\t// class\r\n\t\tpatchClass(el, nextVal)\r\n\t} else if (key === 'style') {\r\n\t\t// style\r\n\t\tpatchStyle(el, preVal, nextVal)\r\n\t} else if (/^on[^a-z]/.test(key)) {\r\n\t\t// event\r\n\t\tpatchEvents(el, key, preVal, nextVal)\r\n\t} else {\r\n\t\t// attr\r\n\t\tpatchAttrs(el, key, nextVal)\r\n\t}\r\n}\r\n", "import { nodeOps } from './nodeOps'\r\nimport { patchProp } from './patchProp'\r\n\r\n// \u6D4F\u89C8\u5668\u6E32\u67D3\u9700\u8981\u7684DOM\u64CD\u4F5CAPI\r\nconst renderOptions = Object.assign(nodeOps, { patchProp })\r\n\r\nconsole.log(renderOptions)\r\n"],
  "mappings": ";AAOA,IAAM,SAAS,CAAC,OAAa,QAAiB,WAAoC;AACjF,SAAO,aAAa,OAAO,UAAU,IAAI;AAC1C;AAMA,IAAM,SAAS,CAAC,UAAgB;AAC/B,QAAM,SAAS,MAAM;AACrB,MAAI,QAAQ;AACX,WAAO,YAAY,KAAK;AAAA,EACzB;AACD;AAMA,IAAM,gBAAgB,CAAC,aAAa;AACnC,SAAO,SAAS,cAAc,QAAQ;AACvC;AAOA,IAAM,aAAa,CAAC,SAAS;AAC5B,SAAO,KAAK;AACb;AAOA,IAAM,cAAc,CAAC,SAAS;AAC7B,SAAO,KAAK;AACb;AAOA,IAAM,gBAAgB,CAAC,YAAY;AAClC,SAAO,SAAS,cAAc,OAAO;AACtC;AAMA,IAAM,aAAa,CAAC,SAAS;AAC5B,WAAS,eAAe,IAAI;AAC7B;AAOA,IAAM,UAAU,CAAC,IAAI,SAAS;AAC7B,KAAG,YAAY;AAChB;AAMA,IAAM,iBAAiB,CAAC,IAAI,SAAS;AACpC,KAAG,cAAc;AAClB;AAEO,IAAM,UAAU;AAAA,EACtB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACD;;;AC5FO,IAAM,aAAa,CAAC,IAAI,KAAK,aAAa;AAChD,MAAI,UAAU;AACb,OAAG,aAAa,KAAK,QAAQ;AAAA,EAC9B,OAAO;AACN,OAAG,gBAAgB,GAAG;AAAA,EACvB;AACD;;;ACDO,IAAM,aAAa,CAAC,IAAI,UAAU;AACxC,MAAI,SAAS,MAAM;AAClB,OAAG,gBAAgB,OAAO;AAAA,EAC3B,OAAO;AACN,OAAG,YAAY;AAAA,EAChB;AACD;;;ACNA,SAAS,cAAc,cAAc;AACpC,QAAM,UAAU,CAAC,MAAM,QAAQ,MAAM,CAAC;AACtC,UAAQ,QAAQ;AAChB,SAAO;AACR;AACO,IAAM,cAAc,CAAC,IAAI,KAAK,UAAU,YAAY;AAC1D,QAAM,WAAW,GAAG,QAAQ,GAAG,MAAM,CAAC;AACtC,QAAM,OAAO,IAAI,MAAM,CAAC,EAAE,YAAY;AACtC,MAAI,kBAAkB,SAAS,IAAI;AAGnC,MAAI,mBAAmB,SAAS;AAC/B,oBAAgB,QAAQ;AAAA,EACzB,WAES,CAAC,mBAAmB,SAAS;AACrC,UAAM,UAAU,cAAc,OAAO;AACrC,aAAS,IAAI,IAAI;AACjB,OAAG,iBAAiB,MAAM,OAAO;AAAA,EAClC,WAES,CAAC,SAAS;AAClB,OAAG,kBAAkB,MAAM,eAAe;AAC1C,aAAS,IAAI,IAAI;AAAA,EAClB;AACD;;;ACxBO,IAAM,aAAa,CAAC,IAAI,UAAU,cAAc;AACtD,QAAM,QAAS,GAAmB;AAGlC,aAAW,OAAO,WAAW;AAC5B,UAAM,GAAG,IAAI,UAAU,GAAG;AAAA,EAC3B;AAEA,aAAW,OAAO,UAAU;AAC3B,QAAI,CAAC,UAAU,GAAG,GAAG;AACpB,YAAM,GAAG,IAAI;AAAA,IACd;AAAA,EACD;AACD;;;ACNO,IAAM,YAAY,CAAC,IAAa,KAAK,QAAQ,YAAY;AAC/D,MAAI,QAAQ,SAAS;AAEpB,eAAW,IAAI,OAAO;AAAA,EACvB,WAAW,QAAQ,SAAS;AAE3B,eAAW,IAAI,QAAQ,OAAO;AAAA,EAC/B,WAAW,YAAY,KAAK,GAAG,GAAG;AAEjC,gBAAY,IAAI,KAAK,QAAQ,OAAO;AAAA,EACrC,OAAO;AAEN,eAAW,IAAI,KAAK,OAAO;AAAA,EAC5B;AACD;;;ACvBA,IAAM,gBAAgB,OAAO,OAAO,SAAS,EAAE,UAAU,CAAC;AAE1D,QAAQ,IAAI,aAAa;",
  "names": []
}
